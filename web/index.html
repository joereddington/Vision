<html>

<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script>
</head>

<body>
<h1> Vision</h1>
This is Vision,  Joe's Project management tool.
<IMG src="images/cover.png" height=300>
<div class="blog" >
    <h2>Deadlines:</h2>


<div id="content"></div>
    <script>
        deadlines = []
        start();

        function start() {
            var req = new XMLHttpRequest();
            req.open("GET", "http://flow.joereddington.com/vision/deadlines.json");
            req.overrideMimeType("application/json");
            req.send(null);
            req.onreadystatechange = function() {
                if (req.readyState == 4 && req.status == 200) {
                    var obj = JSON.parse(req.responseText);
                    deadlines = obj
		    var content="<table>"
		    var i=0
                    for (i=0;i<deadlines.length;i++){ 
			if (deadlines[i].state=="open"){
			content+="<tr><td>"+deadlines[i].date+ "</td><td>"+deadlines[i].action+"</td></tr>"
			console.log(deadlines[i])
                        console.log(deadlines[i].date)
                        console.log(deadlines[i].action)
			}
                    }
		document.getElementById("content").innerHTML=content+"</table>"
                }
            };
        }
    </script>

</body>
